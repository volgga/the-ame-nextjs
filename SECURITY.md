# Безопасность

## Секреты и токены

- **Никогда не коммитьте** в репозиторий:
  - файлы с токенами (Telegram Bot, API-ключи);
  - `deploy-commands.sh`, `add-telegram-env.sh` и подобные локальные скрипты с секретами;
  - `.env`, `.env.local` и любые файлы с паролями или ключами.

- Все секреты храните **только в переменных окружения** (на сервере — в `.env` или в настройках PM2 / GitHub Secrets).

## Если токен Telegram попал в репозиторий

1. **Сразу отзовите токен** в [@BotFather](https://t.me/BotFather): команда `/revoke` или создайте нового бота и получите новый токен.
2. Задайте **новый токен только в переменных окружения** (например `TELEGRAM_BOT_TOKEN`) на сервере и в CI, не в файлах репозитория.
3. Файлы вроде `deploy-commands.sh` добавлены в `.gitignore` — не удаляйте их из игнора и не коммитьте такие файлы.

## Оповещения GitHub (Secret scanning)

Если GitHub сообщает об утечке секрета (например, токен Telegram в `deploy-commands.sh`):

- Токен уже считается скомпрометированным: отзовите его у провайдера и создайте новый.
- Убедитесь, что файл с секретом в `.gitignore` и больше не попадает в коммиты.
- При необходимости удалите файл из истории (например, через [GitHub Support](https://support.github.com) или `git filter-repo`), но отзыв токена обязателен в любом случае.
