# Финальный чеклист проекта The Ame

## Главная страница (/)

- [ ] Слайды отображаются в правильном порядке (sort_order ASC)
- [ ] Автоплей: смена слайда каждые 5 секунд
- [ ] Переход плавный (~800ms), без дёрганий
- [ ] Стрелки белые, chevron-форма, без фона
- [ ] Нет затемнения поверх изображений
- [ ] Нет текста на слайдах

---

## Админка: Слайды (/admin/slides)

- [ ] Сетка карточек с превью изображений
- [ ] Бейдж с номером порядка (#1, #2, ...)
- [ ] Drag & drop: перетаскивание меняет порядок
- [ ] Кнопки "Сохранить" / "Не сохранять" появляются при изменении порядка
- [ ] "Сохранить" — сохраняет порядок в БД
- [ ] "Не сохранять" — сбрасывает к исходному
- [ ] Кнопка "Добавить" — открывает модалку
- [ ] Модалка: загрузка файла (не URL), чекбокс "Активен"
- [ ] Hover на карточке: кнопка "Редактировать"
- [ ] Редактирование: замена изображения, toggle активности
- [ ] Удаление: удаляет слайд и файл из Storage
- [ ] Закрытие модалки: крестик, клик вне, ESC

---

## Админка: Категории (/admin/categories)

- [ ] Сетка карточек без фото
- [ ] Бейдж с номером порядка (#1, #2, ...)
- [ ] Название категории крупно
- [ ] Статус "Активна" / "Неактивна"
- [ ] Drag & drop: перетаскивание меняет порядок
- [ ] Кнопки "Сохранить" / "Не сохранять" при изменении порядка
- [ ] Иконки управления в правом верхнем углу:
  - [ ] Глаз / зачёркнутый глаз — toggle активности
  - [ ] Карандаш — редактировать
  - [ ] Корзина — удалить
- [ ] Toggle активности: мгновенно в UI, PATCH в БД
- [ ] Удаление: подтверждение "Точно удалить?" (Нет / Да)
- [ ] Кнопка "Добавить" — открывает модалку
- [ ] Модалка: только поле "Название" (slug автоматический)
- [ ] Slug уникальный (при дублях -2, -3, ...)
- [ ] Закрытие модалки: крестик, клик вне, ESC

---

## Меню "Каталог" (шапка)

- [ ] Мега-меню в несколько колонок (2-5 в зависимости от количества)
- [ ] Первый пункт: "Все цветы" → `/posmotret-vse-tsvety`
- [ ] Остальные: категории из БД (is_active=true, sort_order ASC)
- [ ] Клик на категорию → `/magazine/<slug>`
- [ ] Анимация открытия: opacity + translateY
- [ ] Hover на desktop, клик на touch
- [ ] Категории кешируются (TTL 2 минуты)

---

## Каталог

- [ ] `/posmotret-vse-tsvety` — все товары
- [ ] `/magazine/[slug]` — товары категории
- [ ] Фильтрация по `category_slug` работает
- [ ] Неактивная категория → 404

---

## Редиректы

- [ ] `/catalog` → `/posmotret-vse-tsvety` (308)
- [ ] `/catalog/<slug>` → `/magazine/<slug>` (308)
- [ ] `/posmotret-vse-tsvety/<slug>` → `/magazine/<slug>` (308)
- [ ] `/catalog?category=<slug>` → `/magazine/<slug>` (308)

---

## База данных

### hero_slides
- [ ] Колонки: id, image_url, sort_order, is_active, created_at, updated_at
- [ ] Нет колонок title, subtitle
- [ ] Индекс на sort_order
- [ ] RLS: SELECT для is_active=true, остальное service_role

### categories
- [ ] Колонки: id, name, slug, sort_order, is_active, created_at
- [ ] slug UNIQUE
- [ ] Индекс на sort_order
- [ ] RLS: SELECT для is_active=true, остальное service_role

### products / variant_products
- [ ] Есть колонка category_slug
- [ ] Связь с categories по slug

---

## Storage

- [ ] Bucket `hero-slides` существует
- [ ] Публичное чтение разрешено
- [ ] Все слайды имеют image_url (не NULL)
- [ ] Файлы в Storage соответствуют записям в БД

---

## Сборка

- [ ] `npm run build` проходит без ошибок
- [ ] Нет неиспользуемых импортов
- [ ] Нет TypeScript ошибок

---

## Документация

- [ ] `docs/ARCHITECTURE-AUDIT.md` — карта проекта
- [ ] `docs/STORAGE-SETUP.md` — настройка Storage
- [ ] `docs/ROUTES.md` — маршруты и редиректы
- [ ] `docs/FINAL-CHECKLIST.md` — этот чеклист
- [ ] `docs/SLIDES-SYSTEM.md` — система слайдов
- [ ] `docs/SEED-CATEGORIES.md` — заполнение категорий
