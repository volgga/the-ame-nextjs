# Заполнение категорий каталога (seed)

Скрипт `scripts/seed-categories.ts` заполняет таблицу `categories` из списка названий. Повторный запуск не создаёт дубликаты (upsert по `slug`).

## Как заполнить категории

1. **Откройте файл**  
   `scripts/seed-categories.ts`

2. **Вставьте список названий** в массив `CATEGORY_NAMES`:
   - Порядок в массиве = порядок в каталоге (`sort_order`: 0, 1, 2, …).
   - Можно взять названия с [flowerna.ru/posmotret-vse-tsvety](https://flowerna.ru/posmotret-vse-tsvety) или задать свои.

   Пример:
   ```ts
   const CATEGORY_NAMES: string[] = [
     "Авторские букеты",
     "Моно букеты",
     "14 февраля",
     "8 марта",
     "Свадебные букеты",
     "Сухоцветы",
     "Вазы",
     // …
   ];
   ```

3. **Запустите команду** из корня проекта:
   ```bash
   npm run seed-categories
   ```

4. **Проверка**  
   В админке: [/admin/categories](/admin/categories) — категории появятся в нужном порядке. При повторном запуске порядок и активность обновятся, дубликаты не создаются.

## Как это устроено

- **Slug** генерируется автоматически: транслитерация RU→EN, lowercase, пробелы и символы заменяются на дефисы (та же логика, что в `src/utils/slugify.ts`).
- **Уникальность**: если slug уже есть в БД или уже использован в этом запуске, добавляется суффикс `-2`, `-3` и т.д.
- **Upsert по slug**: при повторном запуске запись с таким slug обновляется (`sort_order`, `is_active`), новые строки не дублируются.

## Требования

- В `.env.local` заданы `NEXT_PUBLIC_SUPABASE_URL` и `SUPABASE_SERVICE_ROLE_KEY` (запись в `categories` только через service role).
