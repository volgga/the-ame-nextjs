-- =============================================================================
-- Миграция: Расширение home_reviews — добавление секций "О нас" и "FAQ".
-- Запуск: Supabase SQL Editor.
-- =============================================================================

-- Добавляем поля для секции "О нас"
ALTER TABLE public.home_reviews 
ADD COLUMN IF NOT EXISTS about_title TEXT DEFAULT 'О нас',
ADD COLUMN IF NOT EXISTS about_text TEXT DEFAULT 'Цветочный магазин «THE AME»

Цветочный магазин «THE AME» предлагает доставку цветов в Сочи и удобный онлайн-заказ букетов для любого повода. У нас вы можете купить цветы в Сочи с быстрой доставкой — домой, в офис, отель или ресторан. Мы работаем только с свежими цветами и создаём букеты, которые радуют внешним видом и сохраняют свежесть как можно дольше.

В каталоге «THE AME» представлены букеты цветов на любой вкус: классические и авторские композиции, букеты из роз, монобукеты, цветы в коробке и цветы в корзине. Наши флористы внимательно подбирают каждый элемент композиции, учитывая стиль, повод и ваши пожелания. Мы следим за современными тенденциями флористики и регулярно обновляем ассортимент, чтобы вы могли заказать актуальные и стильные букеты.

Доставка цветов по Сочи осуществляется ежедневно и охватывает все основные районы города. Вы можете оформить заказ заранее или в день доставки, выбрать удобное время и добавить открытку с личным текстом. Мы бережно упаковываем каждый букет и контролируем качество на всех этапах — от сборки до передачи получателю.

Цветы с доставкой в Сочи от «THE AME» — это удобный способ поздравить близких, выразить чувства или сделать приятный сюрприз. Закажите букет онлайн и доверьте заботу о деталях профессиональной команде цветочного магазина «THE AME».',
ADD COLUMN IF NOT EXISTS about_image_url TEXT;

-- Добавляем поле для FAQ (JSONB массив объектов {question, answer})
ALTER TABLE public.home_reviews 
ADD COLUMN IF NOT EXISTS faq_items JSONB DEFAULT '[
  {
    "id": "1",
    "question": "Как быстро осуществляется доставка цветов по Сочи?",
    "answer": "Доставка цветов по Сочи осуществляется ежедневно. Вы можете оформить заказ заранее или в день доставки, выбрав удобное время. Минимальное время доставки — от 45 минут."
  },
  {
    "id": "2",
    "question": "В какие районы Сочи вы доставляете?",
    "answer": "Мы доставляем цветы во все основные районы города Сочи. При оформлении заказа вы можете указать точный адрес, и мы подтвердим возможность доставки."
  },
  {
    "id": "3",
    "question": "Как оплатить заказ?",
    "answer": "Мы принимаем различные способы оплаты: наличными при получении, банковской картой онлайн или при получении. Все способы оплаты доступны при оформлении заказа."
  },
  {
    "id": "4",
    "question": "Насколько свежие цветы вы используете?",
    "answer": "Мы работаем только со свежими цветами и создаём букеты, которые сохраняют свежесть как можно дольше. Качество контролируется на всех этапах — от сборки до передачи получателю."
  },
  {
    "id": "5",
    "question": "Можно ли добавить открытку к букету?",
    "answer": "Да, вы можете добавить открытку с личным текстом при оформлении заказа. Мы передадим её вместе с букетом получателю."
  },
  {
    "id": "6",
    "question": "Что делать, если цветы не подошли?",
    "answer": "Если у вас возникли вопросы по качеству или составу букета, пожалуйста, свяжитесь с нами. Мы всегда готовы помочь и решить любую ситуацию."
  },
  {
    "id": "7",
    "question": "Можно ли заказать букет заранее?",
    "answer": "Да, вы можете оформить заказ заранее, выбрав удобную дату и время доставки. Это особенно удобно для важных событий и праздников."
  },
  {
    "id": "8",
    "question": "Какие виды букетов вы предлагаете?",
    "answer": "В нашем каталоге представлены классические и авторские композиции, букеты из роз, монобукеты, цветы в коробке и цветы в корзине. Мы регулярно обновляем ассортимент, следуя современным тенденциям флористики."
  }
]'::jsonb;

-- Обновляем существующие записи, если они есть
UPDATE public.home_reviews
SET 
  about_title = COALESCE(about_title, 'О нас'),
  about_text = COALESCE(about_text, 'Цветочный магазин «THE AME»

Цветочный магазин «THE AME» предлагает доставку цветов в Сочи и удобный онлайн-заказ букетов для любого повода. У нас вы можете купить цветы в Сочи с быстрой доставкой — домой, в офис, отель или ресторан. Мы работаем только с свежими цветами и создаём букеты, которые радуют внешним видом и сохраняют свежесть как можно дольше.

В каталоге «THE AME» представлены букеты цветов на любой вкус: классические и авторские композиции, букеты из роз, монобукеты, цветы в коробке и цветы в корзине. Наши флористы внимательно подбирают каждый элемент композиции, учитывая стиль, повод и ваши пожелания. Мы следим за современными тенденциями флористики и регулярно обновляем ассортимент, чтобы вы могли заказать актуальные и стильные букеты.

Доставка цветов по Сочи осуществляется ежедневно и охватывает все основные районы города. Вы можете оформить заказ заранее или в день доставки, выбрать удобное время и добавить открытку с личным текстом. Мы бережно упаковываем каждый букет и контролируем качество на всех этапах — от сборки до передачи получателю.

Цветы с доставкой в Сочи от «THE AME» — это удобный способ поздравить близких, выразить чувства или сделать приятный сюрприз. Закажите букет онлайн и доверьте заботу о деталях профессиональной команде цветочного магазина «THE AME».'),
  faq_items = COALESCE(faq_items, '[
    {
      "id": "1",
      "question": "Как быстро осуществляется доставка цветов по Сочи?",
      "answer": "Доставка цветов по Сочи осуществляется ежедневно. Вы можете оформить заказ заранее или в день доставки, выбрав удобное время. Минимальное время доставки — от 45 минут."
    },
    {
      "id": "2",
      "question": "В какие районы Сочи вы доставляете?",
      "answer": "Мы доставляем цветы во все основные районы города Сочи. При оформлении заказа вы можете указать точный адрес, и мы подтвердим возможность доставки."
    },
    {
      "id": "3",
      "question": "Как оплатить заказ?",
      "answer": "Мы принимаем различные способы оплаты: наличными при получении, банковской картой онлайн или при получении. Все способы оплаты доступны при оформлении заказа."
    },
    {
      "id": "4",
      "question": "Насколько свежие цветы вы используете?",
      "answer": "Мы работаем только со свежими цветами и создаём букеты, которые сохраняют свежесть как можно дольше. Качество контролируется на всех этапах — от сборки до передачи получателю."
    },
    {
      "id": "5",
      "question": "Можно ли добавить открытку к букету?",
      "answer": "Да, вы можете добавить открытку с личным текстом при оформлении заказа. Мы передадим её вместе с букетом получателю."
    },
    {
      "id": "6",
      "question": "Что делать, если цветы не подошли?",
      "answer": "Если у вас возникли вопросы по качеству или составу букета, пожалуйста, свяжитесь с нами. Мы всегда готовы помочь и решить любую ситуацию."
    },
    {
      "id": "7",
      "question": "Можно ли заказать букет заранее?",
      "answer": "Да, вы можете оформить заказ заранее, выбрав удобную дату и время доставки. Это особенно удобно для важных событий и праздников."
    },
    {
      "id": "8",
      "question": "Какие виды букетов вы предлагаете?",
      "answer": "В нашем каталоге представлены классические и авторские композиции, букеты из роз, монобукеты, цветы в коробке и цветы в корзине. Мы регулярно обновляем ассортимент, следуя современным тенденциям флористики."
    }
  ]'::jsonb)
WHERE about_title IS NULL OR about_text IS NULL OR faq_items IS NULL;
